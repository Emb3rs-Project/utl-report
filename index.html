<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emb3rs - Test Report</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
    integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body class="container pt-5">
  <img src="https://www.emb3rs.eu/wp-content/uploads/2019/12/EMB3Rs_horizontal-Logo.png" class="img">
  

<style>

    .legend-box {
      cursor: pointer;
    }
    
</style>

<div id="fig_el138581398269586525123707440855"></div>
<script>
function mpld3_load_lib(url, callback){
  var s = document.createElement('script');
  s.src = url;
  s.async = true;
  s.onreadystatechange = s.onload = callback;
  s.onerror = function(){console.warn("failed to load library " + url);};
  document.getElementsByTagName("head")[0].appendChild(s);
}

if(typeof(mpld3) !== "undefined" && mpld3._mpld3IsLoaded){
   // already loaded: just create the figure
   !function(mpld3){
       
    mpld3.register_plugin("interactive_legend", InteractiveLegend);
    InteractiveLegend.prototype = Object.create(mpld3.Plugin.prototype);
    InteractiveLegend.prototype.constructor = InteractiveLegend;
    InteractiveLegend.prototype.requiredProps = ["element_ids", "labels"];
    InteractiveLegend.prototype.defaultProps = {"ax":null,
                                                "alpha_unsel":0.2,
                                                "alpha_over":1.0,
                                                "start_visible":true,
                                                "font_size": 10,
                                                "legend_offset": [0,0]}
    function InteractiveLegend(fig, props){
        mpld3.Plugin.call(this, fig, props);
    };

    InteractiveLegend.prototype.draw = function(){
        var alpha_unsel = this.props.alpha_unsel;
        var alpha_over = this.props.alpha_over;
        var font_size = this.props.font_size;
        var legend_offset = this.props.legend_offset;

        var legendItems = new Array();
        for(var i=0; i<this.props.labels.length; i++){
            var obj = {};
            obj.label = this.props.labels[i];

            var element_id = this.props.element_ids[i];
            mpld3_elements = [];
            for(var j=0; j<element_id.length; j++){
                var mpld3_element = mpld3.get_element(element_id[j], this.fig);

                // mpld3_element might be null in case of Line2D instances
                // for we pass the id for both the line and the markers. Either
                // one might not exist on the D3 side
                if(mpld3_element){
                    mpld3_elements.push(mpld3_element);
                }
            }

            obj.mpld3_elements = mpld3_elements;
            obj.visible = this.props.start_visible[i]; // should become be setable from python side
            legendItems.push(obj);
            set_alphas(obj, false);
        }

        // determine the axes with which this legend is associated
        var ax = this.props.ax
        if(!ax){
            ax = this.fig.axes[0];
        } else{
            ax = mpld3.get_element(ax, this.fig);
        }

        // add a legend group to the canvas of the figure
        var legend = this.fig.canvas.append("svg:g")
                               .attr("class", "legend");

        // add the rectangles
        legend.selectAll("rect")
                .data(legendItems)
                .enter().append("rect")
                .attr("height", 0.7*font_size)
                .attr("width", 1.6*font_size)
                .attr("x", ax.width + ax.position[0] + 15 + legend_offset[0])
                .attr("y",function(d,i) {
                           return ax.position[1] + i * (font_size+5) + 10 + legend_offset[1];})
                .attr("stroke", get_color)
                .attr("class", "legend-box")
                .style("fill", function(d, i) {
                           return d.visible ? get_color(d) : "white";})
                .on("click", click).on('mouseover', over).on('mouseout', out);

        // add the labels
        legend.selectAll("text")
              .data(legendItems)
              .enter().append("text")
              .attr("font-size", font_size)
              .attr("x", function (d) {
                           return ax.width + ax.position[0] + (1.9*font_size+15) + legend_offset[0];})
              .attr("y", function(d,i) {
                           return ax.position[1] + i * (font_size+5) + 10 + (0.72*font_size-1) + legend_offset[1];})
              .text(function(d) { return d.label })
              .on('mouseover', over).on('mouseout', out);


        // specify the action on click
        function click(d,i){
            d.visible = !d.visible;
            d3.select(this)
              .style("fill",function(d, i) {
                return d.visible ? get_color(d) : "white";
              })
            set_alphas(d, false);

        };

        // specify the action on legend overlay 
        function over(d,i){
             set_alphas(d, true);
        };

        // specify the action on legend overlay 
        function out(d,i){
             set_alphas(d, false);
        };

        // helper function for setting alphas
        function set_alphas(d, is_over){
            for(var i=0; i<d.mpld3_elements.length; i++){
                var type = d.mpld3_elements[i].constructor.name;

                if(type =="mpld3_Line"){
                    var current_alpha = d.mpld3_elements[i].props.alpha;
                    var current_alpha_unsel = current_alpha * alpha_unsel;
                    var current_alpha_over = current_alpha * alpha_over;
                    d3.select(d.mpld3_elements[i].path.nodes()[0])
                        .style("stroke-opacity", is_over ? current_alpha_over :
                                                (d.visible ? current_alpha : current_alpha_unsel))
                        .style("stroke-width", is_over ?
                                alpha_over * d.mpld3_elements[i].props.edgewidth : d.mpld3_elements[i].props.edgewidth);
                } else if((type=="mpld3_PathCollection")||
                         (type=="mpld3_Markers")){
                    var current_alpha = d.mpld3_elements[i].props.alphas[0];
                    var current_alpha_unsel = current_alpha * alpha_unsel;
                    var current_alpha_over = current_alpha * alpha_over;
                    d.mpld3_elements[i].pathsobj
                        .style("stroke-opacity", is_over ? current_alpha_over :
                                                (d.visible ? current_alpha : current_alpha_unsel))
                        .style("fill-opacity", is_over ? current_alpha_over :
                                                (d.visible ? current_alpha : current_alpha_unsel));
                } else{
                    console.log(type + " not yet supported");
                }
            }
        };


        // helper function for determining the color of the rectangles
        function get_color(d){
            var type = d.mpld3_elements[0].constructor.name;
            var color = "black";
            if(type =="mpld3_Line"){
                color = d.mpld3_elements[0].props.edgecolor;
            } else if((type=="mpld3_PathCollection")||
                      (type=="mpld3_Markers")){
                color = d.mpld3_elements[0].props.facecolors[0];
            } else{
                console.log(type + " not yet supported");
            }
            return color;
        };
    };
    
       mpld3.draw_figure("fig_el138581398269586525123707440855", {"width": 640.0, "height": 480.0, "axes": [{"bbox": [0.125, 0.10999999999999999, 0.775, 0.77], "xlim": [-0.5, 10.5], "ylim": [-0.4977049114899597, 0.6158985031979995], "xdomain": [-0.5, 10.5], "ydomain": [-0.4977049114899597, 0.6158985031979995], "xscale": "linear", "yscale": "linear", "axes": [{"position": "bottom", "nticks": 8, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 10.0, "grid": {"gridOn": false}, "visible": true}, {"position": "left", "nticks": 8, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 10.0, "grid": {"gridOn": false}, "visible": true}], "axesbg": "#FFFFFF", "axesbgalpha": null, "zoomable": true, "id": "el13858139825295660272", "lines": [{"data": "data01", "xindex": 0, "yindex": 1, "coordinates": "data", "id": "el13858139825295533200", "color": "#1F77B4", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 2, "coordinates": "data", "id": "el13858139825295533536", "color": "#FF7F0E", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 3, "coordinates": "data", "id": "el13858139825295533824", "color": "#2CA02C", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 4, "coordinates": "data", "id": "el13858139825295534112", "color": "#D62728", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 5, "coordinates": "data", "id": "el13858139825295475952", "color": "#9467BD", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}], "paths": [], "markers": [], "texts": [], "collections": [], "images": [], "sharex": [], "sharey": []}], "data": {"data01": [[0.0, -0.019908499811116722, -0.021499947632910157, -0.01029166012225835, 0.03244228580069632, 0.01928262533515046], [0.10101010101010101, -0.016458898932398627, 0.02205039236866786, 0.03402373858153027, 0.07333221663757152, -0.02855961558564421], [0.20202020202020202, -0.055969046459446475, 0.03399647104925968, 0.026081379555132768, 0.11462529540157405, -0.025189945246136373], [0.30303030303030304, -0.051669641141327244, 0.06845735223046001, -0.009750522385667225, 0.141680565253481, -0.03227036387737939], [0.40404040404040403, -0.022603536242706227, 0.05378717664701743, -0.017936274661944418, 0.14622998364744555, -0.05066731034199261], [0.5050505050505051, -0.05638432527085166, 0.019946211645060094, 0.014302088331798857, 0.18596250944627085, -0.0690645604969633], [0.6060606060606061, -0.07422857205033108, 0.029590052080980565, -0.0052730528555332, 0.23220847580773785, -0.04052765389145295], [0.7070707070707071, -0.08381571607127886, 0.04973177482192606, -0.030746741410075717, 0.258890905291118, -0.037517304462227216], [0.8080808080808081, -0.10332951790430678, 0.05756457340441641, -0.02244190447688675, 0.26285968734798126, -0.04028112096067978], [0.9090909090909091, -0.09535216450429083, 0.09735911905058936, -0.01930066270326549, 0.2614993009035194, -0.034062880318745666], [1.0101010101010102, -0.1257576843554811, 0.11598056150467162, -0.02554549681466467, 0.2524035323399242, -0.034256284014175784], [1.1111111111111112, -0.1373580477684578, 0.1617519198852529, -0.04123238569114083, 0.21467608085461948, 0.011604716788099337], [1.2121212121212122, -0.15172962437464546, 0.13567879497228977, -0.05064703531478673, 0.24256284612437573, -0.028154510294944868], [1.3131313131313131, -0.1900718650657418, 0.15757333237603516, -0.007918756684345767, 0.20713464808265653, -0.010721858874179192], [1.4141414141414141, -0.1656716132573026, 0.19200596997961814, -0.024047536089262828, 0.1829725522982738, -0.04361806919016918], [1.5151515151515151, -0.137427692983859, 0.23239054521382324, -0.021916365658917875, 0.21998170231024006, 0.00555746506714417], [1.6161616161616161, -0.1818476945098042, 0.2726263836672627, -0.03290280192724673, 0.26346368209526466, 0.023807540665483514], [1.7171717171717171, -0.23002600006566246, 0.3027233615574207, -0.02084770649945568, 0.2191059916790467, 0.0007623299478043376], [1.8181818181818181, -0.27024694333880356, 0.32813518040409806, 0.00996031459932335, 0.2588656912514543, 0.003658255780781635], [1.9191919191919191, -0.2699947567594363, 0.3182957643528758, -0.022264681954284094, 0.23370298572502804, 0.023010254643693905], [2.0202020202020203, -0.22963231664163658, 0.3242948260839057, 0.020094451034570898, 0.2765807586901774, 0.05716465527898962], [2.121212121212121, -0.18850191626385734, 0.35311278444727745, 0.06630549445612367, 0.3142216035590631, 0.03269467760232164], [2.2222222222222223, -0.20819142622797537, 0.35250916119455394, 0.029422183974399795, 0.26950517718918016, 0.05148344230378013], [2.323232323232323, -0.19060212291285036, 0.3519005031926488, -0.01587407926435492, 0.2650964294275515, 0.08669092991773203], [2.4242424242424243, -0.23759785851499166, 0.4017905409705448, -0.0037438930132919056, 0.29552144037694567, 0.07571151808286698], [2.525252525252525, -0.1934201393235424, 0.45146622518376056, 0.01869138317250066, 0.27773000921664925, 0.11758273706691738], [2.6262626262626263, -0.22844720212468617, 0.49798958294841905, 0.032490602068444424, 0.2691424238432698, 0.1470676723612331], [2.727272727272727, -0.25698081068016515, 0.5333873973488403, 0.03509201516646551, 0.29434425643148, 0.18756207013721504], [2.8282828282828283, -0.21251522150091778, 0.5331973435175161, 0.041934442173791046, 0.3439408447483597, 0.18236123085841136], [2.929292929292929, -0.18217644279139586, 0.5009408872484383, 0.0873386076583322, 0.3528703927184868, 0.14234543048997095], [3.0303030303030303, -0.14533890845876546, 0.4971183614639475, 0.08142647036917754, 0.34683388539539406, 0.19089007938864577], [3.131313131313131, -0.18377919901586606, 0.46411519120949607, 0.07991154215434844, 0.3134043441423822, 0.23131227480613392], [3.2323232323232323, -0.16247358552001126, 0.4366648838321378, 0.06743126755061246, 0.3256032164505824, 0.2513420642925066], [3.3333333333333335, -0.19812491783329594, 0.44946710600058143, 0.05898265515444541, 0.3204617222208573, 0.21599402196180736], [3.4343434343434343, -0.18912500572522284, 0.40751173159412063, 0.054605643509281945, 0.35003797833834027, 0.2561198157525759], [3.5353535353535355, -0.218740892552648, 0.4486115969110386, 0.06572639397453511, 0.36837967688144646, 0.2725319846495674], [3.6363636363636362, -0.2679028612251969, 0.445203919378654, 0.06992701086462158, 0.3881251057724072, 0.22363983958591604], [3.7373737373737375, -0.3002811721199239, 0.4747175442192017, 0.09422401301715054, 0.4181787203026548, 0.19561009918026995], [3.8383838383838382, -0.27808124655662464, 0.4638420047144306, 0.12457833244737995, 0.41001079457415845, 0.22530132946827275], [3.9393939393939394, -0.2319833650384682, 0.4248567271991625, 0.12158149382192054, 0.36158176426737154, 0.2608563911863807], [4.040404040404041, -0.24559098890928985, 0.4350447985082474, 0.07292728699345588, 0.3217279242459198, 0.2737788535623165], [4.141414141414141, -0.2583394631723894, 0.4234984413852194, 0.10164455735682805, 0.3083234208411323, 0.22860669534350458], [4.242424242424242, -0.2730246176275948, 0.471741413862965, 0.06475323126785859, 0.2753266408452413, 0.20007078858210395], [4.343434343434343, -0.30847626826018687, 0.43139292655279815, 0.03890564552905476, 0.23727519665475946, 0.19821295669556807], [4.444444444444445, -0.29428459348234237, 0.4645475110948143, 0.07859941498548875, 0.21336430979936308, 0.15319436286702753], [4.545454545454545, -0.2641382187059986, 0.48444926668781235, 0.04970680991675576, 0.2056138153729696, 0.19748260995728228], [4.646464646464646, -0.22503755010265736, 0.5155991017685909, 0.004876339968888942, 0.22050071923864803, 0.16688095246999002], [4.747474747474747, -0.2515500460914453, 0.48630909065012556, -0.020556976523951158, 0.2564160628146859, 0.18471367777062675], [4.848484848484849, -0.271997297771161, 0.44460585488730814, -0.039552853631078584, 0.21612850874698677, 0.1447491489853907], [4.94949494949495, -0.2572299081240879, 0.4370618579544183, 0.002513338745705168, 0.18745258394625236, 0.09608595265082735], [5.05050505050505, -0.2899144372885114, 0.40059321911282, -0.0333877882697324, 0.20260561318897413, 0.1246728820279617], [5.151515151515151, -0.25675577247423953, 0.4492670012898023, 0.005474201225969748, 0.2108987393409497, 0.12347636478632013], [5.252525252525253, -0.22614890691666045, 0.47049720171462733, 0.014503645479369259, 0.16707092841006616, 0.1039916430839011], [5.353535353535354, -0.19057271165717884, 0.44040384206589644, 0.006003696736833524, 0.1816122706663303, 0.0845973470423371], [5.454545454545454, -0.22093951948962431, 0.48653893659719405, 0.051527741590611534, 0.14246917406306495, 0.10348378746991883], [5.555555555555555, -0.18901589932655866, 0.5243230558770984, 0.08152466898417546, 0.12273083221380032, 0.10023484110450719], [5.656565656565657, -0.2001599680065808, 0.4858171885038183, 0.07180018273796385, 0.16290743073338323, 0.1236827943042926], [5.757575757575758, -0.20208606995649953, 0.47395240606334227, 0.050086529753730485, 0.20522433293857983, 0.1091621477743567], [5.858585858585858, -0.21346896044601554, 0.4270281600215783, 0.07502694612389638, 0.21011121665910226, 0.10078946473150796], [5.959595959595959, -0.22152325241318288, 0.3823416098257894, 0.08107758781177085, 0.2522591159178727, 0.13472472761001783], [6.0606060606060606, -0.23916290692884626, 0.40544562427221914, 0.10933927117583524, 0.2488711783049129, 0.15874880064972063], [6.161616161616162, -0.2346498317915042, 0.4541463751192714, 0.062260665105304494, 0.2513882254763245, 0.15726618972343448], [6.262626262626262, -0.23422474702479532, 0.4150305729412272, 0.044455662155893874, 0.28215559926012584, 0.13145893663705593], [6.363636363636363, -0.22753415698747378, 0.4260382638495698, 0.0017282544467355984, 0.2633107074128448, 0.11323238767949159], [6.4646464646464645, -0.23676861865267299, 0.4495969844031823, -0.018071397177162767, 0.2696121027935201, 0.07528734795386241], [6.565656565656566, -0.25058797705105096, 0.4029192287907041, -0.020450485730962857, 0.22670639774385998, 0.050539903823178356], [6.666666666666667, -0.25486391628082494, 0.43306558869702094, 0.015077483903919948, 0.2258869071175529, 0.004062593670887578], [6.767676767676767, -0.2930379233387519, 0.3911617180119599, -0.01195935712820722, 0.2224442722994009, 0.04139790722266535], [6.8686868686868685, -0.30026896634793004, 0.4337653147082223, -0.058031687392565964, 0.25271024809300463, 0.025098566255803607], [6.96969696969697, -0.3268246712641839, 0.444073824923639, -0.08927732986144879, 0.2829798843698963, -0.017416317654055765], [7.070707070707071, -0.3213966289415018, 0.45594840006642523, -0.12242187882237496, 0.2673890787739098, -0.004358191734010071], [7.171717171717171, -0.2856546842119021, 0.5001832660851769, -0.10805259251869503, 0.30849789919827425, 0.026304151666580816], [7.2727272727272725, -0.23959625384410468, 0.49272188935531636, -0.08349725064920285, 0.276123574435044, -0.0130120677943526], [7.373737373737374, -0.23330414263335728, 0.5042353959287096, -0.10952342299355933, 0.2790668278530651, 0.025864122149079773], [7.474747474747475, -0.26851801598243236, 0.474566692838678, -0.09192783722726248, 0.24661054136426985, 0.027619210234838532], [7.575757575757575, -0.2866739836211356, 0.4247826770161146, -0.08525510755422179, 0.26482169039883613, 0.006652821494815695], [7.6767676767676765, -0.3058894987403621, 0.394522325102271, -0.0653009071883886, 0.2557916062580526, -0.019942074837217032], [7.777777777777778, -0.35478450141380635, 0.4236503162800086, -0.10808073740691262, 0.2593957796607198, -0.003161892216347967], [7.878787878787879, -0.3957211025248525, 0.40354862558524507, -0.06247879901344963, 0.27290242851028007, -0.017779927979317607], [7.979797979797979, -0.41897193026845225, 0.3688080348531277, -0.07674404019555499, 0.24924127727514853, 0.0020821462840483647], [8.080808080808081, -0.4470865744586888, 0.31940385702908985, -0.0634688994953401, 0.20647211800420542, 0.045457929313567166], [8.181818181818182, -0.4184848652940703, 0.3651817192130299, -0.042997482737341886, 0.20007753977872397, 0.07515328908276317], [8.282828282828282, -0.3871842256334122, 0.36455507641850365, 0.006285708418784376, 0.23488957251119183, 0.07295888503153508], [8.383838383838384, -0.40351984708130406, 0.3796581916219434, 0.02774993351595745, 0.25313709958080166, 0.07718761511313882], [8.484848484848484, -0.38992543422360537, 0.3363957044435797, 0.010867635750092135, 0.269684228685297, 0.10886563442651137], [8.585858585858587, -0.3810087225673874, 0.366342909574191, 0.01064502673943976, 0.25623621036051764, 0.15741370461931586], [8.686868686868687, -0.3816808002613219, 0.4046921947908251, 0.05131472006349774, 0.2555864458141802, 0.19151613164293338], [8.787878787878787, -0.4162782106346684, 0.4234644317483171, 0.029458561573737406, 0.2757931220488387, 0.19684603583016366], [8.88888888888889, -0.3844160758975552, 0.4687040018070048, -0.012964595352251591, 0.23291749286908942, 0.22981301171329255], [8.98989898989899, -0.43047960294472043, 0.5125794324656057, -0.015065226285663532, 0.19970236585250184, 0.22237470192946163], [9.09090909090909, -0.39209759102196057, 0.5575359513377446, 0.019797551780295058, 0.2072820630424157, 0.21297964982985373], [9.191919191919192, -0.36393939229345934, 0.5272501461342979, 0.011781788949287735, 0.19476511086386422, 0.25504838774346916], [9.292929292929292, -0.3143553522848566, 0.5652801661667287, 0.002403831933352245, 0.24389907266164743, 0.23195116683603723], [9.393939393939394, -0.3191788348474941, 0.5596305607340171, 0.04315598137348979, 0.25360405865974656, 0.18517783225767004], [9.494949494949495, -0.3342133536841771, 0.5506282743010305, 0.028379091378452077, 0.21765943891313386, 0.146973414929079], [9.595959595959595, -0.3704876006295444, 0.5118291521172519, 0.03998649686703437, 0.22193084882035816, 0.13122154411448944], [9.696969696969697, -0.39795071361354634, 0.4946221605606167, 0.05547872951981486, 0.225821129915831, 0.10450700701803473], [9.797979797979798, -0.44324965558681545, 0.5395322811438028, 0.08526245988695244, 0.1879775484767403, 0.10883352541771464], [9.8989898989899, -0.40736217306978967, 0.5075581126910804, 0.09495814961635472, 0.19504281744948984, 0.15266510005232603], [10.0, -0.3876983481692954, 0.5271233073683881, 0.08933288202219487, 0.19154457924228116, 0.14420081562002957]]}, "id": "el13858139826958652512", "plugins": [{"type": "reset"}, {"type": "zoom", "button": true, "enabled": false}, {"type": "boxzoom", "button": true, "enabled": false}, {"type": "interactive_legend", "element_ids": [["el13858139825295533200", "el13858139825295533200pts"], ["el13858139825295533536", "el13858139825295533536pts"], ["el13858139825295533824", "el13858139825295533824pts"], ["el13858139825295534112", "el13858139825295534112pts"], ["el13858139825295475952", "el13858139825295475952pts"]], "labels": ["a", "b", "c", "d", "e"], "ax": null, "alpha_unsel": 0.2, "alpha_over": 1.0, "start_visible": [true, true, true, true, true], "font_size": 10, "legend_offset": [0, 0]}]});
   }(mpld3);
}else if(typeof define === "function" && define.amd){
   // require.js is available: use it to load d3/mpld3
   require.config({paths: {d3: "https://d3js.org/d3.v5"}});
   require(["d3"], function(d3){
      window.d3 = d3;
      mpld3_load_lib("https://mpld3.github.io/js/mpld3.v0.5.7.js", function(){
         
    mpld3.register_plugin("interactive_legend", InteractiveLegend);
    InteractiveLegend.prototype = Object.create(mpld3.Plugin.prototype);
    InteractiveLegend.prototype.constructor = InteractiveLegend;
    InteractiveLegend.prototype.requiredProps = ["element_ids", "labels"];
    InteractiveLegend.prototype.defaultProps = {"ax":null,
                                                "alpha_unsel":0.2,
                                                "alpha_over":1.0,
                                                "start_visible":true,
                                                "font_size": 10,
                                                "legend_offset": [0,0]}
    function InteractiveLegend(fig, props){
        mpld3.Plugin.call(this, fig, props);
    };

    InteractiveLegend.prototype.draw = function(){
        var alpha_unsel = this.props.alpha_unsel;
        var alpha_over = this.props.alpha_over;
        var font_size = this.props.font_size;
        var legend_offset = this.props.legend_offset;

        var legendItems = new Array();
        for(var i=0; i<this.props.labels.length; i++){
            var obj = {};
            obj.label = this.props.labels[i];

            var element_id = this.props.element_ids[i];
            mpld3_elements = [];
            for(var j=0; j<element_id.length; j++){
                var mpld3_element = mpld3.get_element(element_id[j], this.fig);

                // mpld3_element might be null in case of Line2D instances
                // for we pass the id for both the line and the markers. Either
                // one might not exist on the D3 side
                if(mpld3_element){
                    mpld3_elements.push(mpld3_element);
                }
            }

            obj.mpld3_elements = mpld3_elements;
            obj.visible = this.props.start_visible[i]; // should become be setable from python side
            legendItems.push(obj);
            set_alphas(obj, false);
        }

        // determine the axes with which this legend is associated
        var ax = this.props.ax
        if(!ax){
            ax = this.fig.axes[0];
        } else{
            ax = mpld3.get_element(ax, this.fig);
        }

        // add a legend group to the canvas of the figure
        var legend = this.fig.canvas.append("svg:g")
                               .attr("class", "legend");

        // add the rectangles
        legend.selectAll("rect")
                .data(legendItems)
                .enter().append("rect")
                .attr("height", 0.7*font_size)
                .attr("width", 1.6*font_size)
                .attr("x", ax.width + ax.position[0] + 15 + legend_offset[0])
                .attr("y",function(d,i) {
                           return ax.position[1] + i * (font_size+5) + 10 + legend_offset[1];})
                .attr("stroke", get_color)
                .attr("class", "legend-box")
                .style("fill", function(d, i) {
                           return d.visible ? get_color(d) : "white";})
                .on("click", click).on('mouseover', over).on('mouseout', out);

        // add the labels
        legend.selectAll("text")
              .data(legendItems)
              .enter().append("text")
              .attr("font-size", font_size)
              .attr("x", function (d) {
                           return ax.width + ax.position[0] + (1.9*font_size+15) + legend_offset[0];})
              .attr("y", function(d,i) {
                           return ax.position[1] + i * (font_size+5) + 10 + (0.72*font_size-1) + legend_offset[1];})
              .text(function(d) { return d.label })
              .on('mouseover', over).on('mouseout', out);


        // specify the action on click
        function click(d,i){
            d.visible = !d.visible;
            d3.select(this)
              .style("fill",function(d, i) {
                return d.visible ? get_color(d) : "white";
              })
            set_alphas(d, false);

        };

        // specify the action on legend overlay 
        function over(d,i){
             set_alphas(d, true);
        };

        // specify the action on legend overlay 
        function out(d,i){
             set_alphas(d, false);
        };

        // helper function for setting alphas
        function set_alphas(d, is_over){
            for(var i=0; i<d.mpld3_elements.length; i++){
                var type = d.mpld3_elements[i].constructor.name;

                if(type =="mpld3_Line"){
                    var current_alpha = d.mpld3_elements[i].props.alpha;
                    var current_alpha_unsel = current_alpha * alpha_unsel;
                    var current_alpha_over = current_alpha * alpha_over;
                    d3.select(d.mpld3_elements[i].path.nodes()[0])
                        .style("stroke-opacity", is_over ? current_alpha_over :
                                                (d.visible ? current_alpha : current_alpha_unsel))
                        .style("stroke-width", is_over ?
                                alpha_over * d.mpld3_elements[i].props.edgewidth : d.mpld3_elements[i].props.edgewidth);
                } else if((type=="mpld3_PathCollection")||
                         (type=="mpld3_Markers")){
                    var current_alpha = d.mpld3_elements[i].props.alphas[0];
                    var current_alpha_unsel = current_alpha * alpha_unsel;
                    var current_alpha_over = current_alpha * alpha_over;
                    d.mpld3_elements[i].pathsobj
                        .style("stroke-opacity", is_over ? current_alpha_over :
                                                (d.visible ? current_alpha : current_alpha_unsel))
                        .style("fill-opacity", is_over ? current_alpha_over :
                                                (d.visible ? current_alpha : current_alpha_unsel));
                } else{
                    console.log(type + " not yet supported");
                }
            }
        };


        // helper function for determining the color of the rectangles
        function get_color(d){
            var type = d.mpld3_elements[0].constructor.name;
            var color = "black";
            if(type =="mpld3_Line"){
                color = d.mpld3_elements[0].props.edgecolor;
            } else if((type=="mpld3_PathCollection")||
                      (type=="mpld3_Markers")){
                color = d.mpld3_elements[0].props.facecolors[0];
            } else{
                console.log(type + " not yet supported");
            }
            return color;
        };
    };
    
         mpld3.draw_figure("fig_el138581398269586525123707440855", {"width": 640.0, "height": 480.0, "axes": [{"bbox": [0.125, 0.10999999999999999, 0.775, 0.77], "xlim": [-0.5, 10.5], "ylim": [-0.4977049114899597, 0.6158985031979995], "xdomain": [-0.5, 10.5], "ydomain": [-0.4977049114899597, 0.6158985031979995], "xscale": "linear", "yscale": "linear", "axes": [{"position": "bottom", "nticks": 8, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 10.0, "grid": {"gridOn": false}, "visible": true}, {"position": "left", "nticks": 8, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 10.0, "grid": {"gridOn": false}, "visible": true}], "axesbg": "#FFFFFF", "axesbgalpha": null, "zoomable": true, "id": "el13858139825295660272", "lines": [{"data": "data01", "xindex": 0, "yindex": 1, "coordinates": "data", "id": "el13858139825295533200", "color": "#1F77B4", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 2, "coordinates": "data", "id": "el13858139825295533536", "color": "#FF7F0E", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 3, "coordinates": "data", "id": "el13858139825295533824", "color": "#2CA02C", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 4, "coordinates": "data", "id": "el13858139825295534112", "color": "#D62728", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 5, "coordinates": "data", "id": "el13858139825295475952", "color": "#9467BD", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}], "paths": [], "markers": [], "texts": [], "collections": [], "images": [], "sharex": [], "sharey": []}], "data": {"data01": [[0.0, -0.019908499811116722, -0.021499947632910157, -0.01029166012225835, 0.03244228580069632, 0.01928262533515046], [0.10101010101010101, -0.016458898932398627, 0.02205039236866786, 0.03402373858153027, 0.07333221663757152, -0.02855961558564421], [0.20202020202020202, -0.055969046459446475, 0.03399647104925968, 0.026081379555132768, 0.11462529540157405, -0.025189945246136373], [0.30303030303030304, -0.051669641141327244, 0.06845735223046001, -0.009750522385667225, 0.141680565253481, -0.03227036387737939], [0.40404040404040403, -0.022603536242706227, 0.05378717664701743, -0.017936274661944418, 0.14622998364744555, -0.05066731034199261], [0.5050505050505051, -0.05638432527085166, 0.019946211645060094, 0.014302088331798857, 0.18596250944627085, -0.0690645604969633], [0.6060606060606061, -0.07422857205033108, 0.029590052080980565, -0.0052730528555332, 0.23220847580773785, -0.04052765389145295], [0.7070707070707071, -0.08381571607127886, 0.04973177482192606, -0.030746741410075717, 0.258890905291118, -0.037517304462227216], [0.8080808080808081, -0.10332951790430678, 0.05756457340441641, -0.02244190447688675, 0.26285968734798126, -0.04028112096067978], [0.9090909090909091, -0.09535216450429083, 0.09735911905058936, -0.01930066270326549, 0.2614993009035194, -0.034062880318745666], [1.0101010101010102, -0.1257576843554811, 0.11598056150467162, -0.02554549681466467, 0.2524035323399242, -0.034256284014175784], [1.1111111111111112, -0.1373580477684578, 0.1617519198852529, -0.04123238569114083, 0.21467608085461948, 0.011604716788099337], [1.2121212121212122, -0.15172962437464546, 0.13567879497228977, -0.05064703531478673, 0.24256284612437573, -0.028154510294944868], [1.3131313131313131, -0.1900718650657418, 0.15757333237603516, -0.007918756684345767, 0.20713464808265653, -0.010721858874179192], [1.4141414141414141, -0.1656716132573026, 0.19200596997961814, -0.024047536089262828, 0.1829725522982738, -0.04361806919016918], [1.5151515151515151, -0.137427692983859, 0.23239054521382324, -0.021916365658917875, 0.21998170231024006, 0.00555746506714417], [1.6161616161616161, -0.1818476945098042, 0.2726263836672627, -0.03290280192724673, 0.26346368209526466, 0.023807540665483514], [1.7171717171717171, -0.23002600006566246, 0.3027233615574207, -0.02084770649945568, 0.2191059916790467, 0.0007623299478043376], [1.8181818181818181, -0.27024694333880356, 0.32813518040409806, 0.00996031459932335, 0.2588656912514543, 0.003658255780781635], [1.9191919191919191, -0.2699947567594363, 0.3182957643528758, -0.022264681954284094, 0.23370298572502804, 0.023010254643693905], [2.0202020202020203, -0.22963231664163658, 0.3242948260839057, 0.020094451034570898, 0.2765807586901774, 0.05716465527898962], [2.121212121212121, -0.18850191626385734, 0.35311278444727745, 0.06630549445612367, 0.3142216035590631, 0.03269467760232164], [2.2222222222222223, -0.20819142622797537, 0.35250916119455394, 0.029422183974399795, 0.26950517718918016, 0.05148344230378013], [2.323232323232323, -0.19060212291285036, 0.3519005031926488, -0.01587407926435492, 0.2650964294275515, 0.08669092991773203], [2.4242424242424243, -0.23759785851499166, 0.4017905409705448, -0.0037438930132919056, 0.29552144037694567, 0.07571151808286698], [2.525252525252525, -0.1934201393235424, 0.45146622518376056, 0.01869138317250066, 0.27773000921664925, 0.11758273706691738], [2.6262626262626263, -0.22844720212468617, 0.49798958294841905, 0.032490602068444424, 0.2691424238432698, 0.1470676723612331], [2.727272727272727, -0.25698081068016515, 0.5333873973488403, 0.03509201516646551, 0.29434425643148, 0.18756207013721504], [2.8282828282828283, -0.21251522150091778, 0.5331973435175161, 0.041934442173791046, 0.3439408447483597, 0.18236123085841136], [2.929292929292929, -0.18217644279139586, 0.5009408872484383, 0.0873386076583322, 0.3528703927184868, 0.14234543048997095], [3.0303030303030303, -0.14533890845876546, 0.4971183614639475, 0.08142647036917754, 0.34683388539539406, 0.19089007938864577], [3.131313131313131, -0.18377919901586606, 0.46411519120949607, 0.07991154215434844, 0.3134043441423822, 0.23131227480613392], [3.2323232323232323, -0.16247358552001126, 0.4366648838321378, 0.06743126755061246, 0.3256032164505824, 0.2513420642925066], [3.3333333333333335, -0.19812491783329594, 0.44946710600058143, 0.05898265515444541, 0.3204617222208573, 0.21599402196180736], [3.4343434343434343, -0.18912500572522284, 0.40751173159412063, 0.054605643509281945, 0.35003797833834027, 0.2561198157525759], [3.5353535353535355, -0.218740892552648, 0.4486115969110386, 0.06572639397453511, 0.36837967688144646, 0.2725319846495674], [3.6363636363636362, -0.2679028612251969, 0.445203919378654, 0.06992701086462158, 0.3881251057724072, 0.22363983958591604], [3.7373737373737375, -0.3002811721199239, 0.4747175442192017, 0.09422401301715054, 0.4181787203026548, 0.19561009918026995], [3.8383838383838382, -0.27808124655662464, 0.4638420047144306, 0.12457833244737995, 0.41001079457415845, 0.22530132946827275], [3.9393939393939394, -0.2319833650384682, 0.4248567271991625, 0.12158149382192054, 0.36158176426737154, 0.2608563911863807], [4.040404040404041, -0.24559098890928985, 0.4350447985082474, 0.07292728699345588, 0.3217279242459198, 0.2737788535623165], [4.141414141414141, -0.2583394631723894, 0.4234984413852194, 0.10164455735682805, 0.3083234208411323, 0.22860669534350458], [4.242424242424242, -0.2730246176275948, 0.471741413862965, 0.06475323126785859, 0.2753266408452413, 0.20007078858210395], [4.343434343434343, -0.30847626826018687, 0.43139292655279815, 0.03890564552905476, 0.23727519665475946, 0.19821295669556807], [4.444444444444445, -0.29428459348234237, 0.4645475110948143, 0.07859941498548875, 0.21336430979936308, 0.15319436286702753], [4.545454545454545, -0.2641382187059986, 0.48444926668781235, 0.04970680991675576, 0.2056138153729696, 0.19748260995728228], [4.646464646464646, -0.22503755010265736, 0.5155991017685909, 0.004876339968888942, 0.22050071923864803, 0.16688095246999002], [4.747474747474747, -0.2515500460914453, 0.48630909065012556, -0.020556976523951158, 0.2564160628146859, 0.18471367777062675], [4.848484848484849, -0.271997297771161, 0.44460585488730814, -0.039552853631078584, 0.21612850874698677, 0.1447491489853907], [4.94949494949495, -0.2572299081240879, 0.4370618579544183, 0.002513338745705168, 0.18745258394625236, 0.09608595265082735], [5.05050505050505, -0.2899144372885114, 0.40059321911282, -0.0333877882697324, 0.20260561318897413, 0.1246728820279617], [5.151515151515151, -0.25675577247423953, 0.4492670012898023, 0.005474201225969748, 0.2108987393409497, 0.12347636478632013], [5.252525252525253, -0.22614890691666045, 0.47049720171462733, 0.014503645479369259, 0.16707092841006616, 0.1039916430839011], [5.353535353535354, -0.19057271165717884, 0.44040384206589644, 0.006003696736833524, 0.1816122706663303, 0.0845973470423371], [5.454545454545454, -0.22093951948962431, 0.48653893659719405, 0.051527741590611534, 0.14246917406306495, 0.10348378746991883], [5.555555555555555, -0.18901589932655866, 0.5243230558770984, 0.08152466898417546, 0.12273083221380032, 0.10023484110450719], [5.656565656565657, -0.2001599680065808, 0.4858171885038183, 0.07180018273796385, 0.16290743073338323, 0.1236827943042926], [5.757575757575758, -0.20208606995649953, 0.47395240606334227, 0.050086529753730485, 0.20522433293857983, 0.1091621477743567], [5.858585858585858, -0.21346896044601554, 0.4270281600215783, 0.07502694612389638, 0.21011121665910226, 0.10078946473150796], [5.959595959595959, -0.22152325241318288, 0.3823416098257894, 0.08107758781177085, 0.2522591159178727, 0.13472472761001783], [6.0606060606060606, -0.23916290692884626, 0.40544562427221914, 0.10933927117583524, 0.2488711783049129, 0.15874880064972063], [6.161616161616162, -0.2346498317915042, 0.4541463751192714, 0.062260665105304494, 0.2513882254763245, 0.15726618972343448], [6.262626262626262, -0.23422474702479532, 0.4150305729412272, 0.044455662155893874, 0.28215559926012584, 0.13145893663705593], [6.363636363636363, -0.22753415698747378, 0.4260382638495698, 0.0017282544467355984, 0.2633107074128448, 0.11323238767949159], [6.4646464646464645, -0.23676861865267299, 0.4495969844031823, -0.018071397177162767, 0.2696121027935201, 0.07528734795386241], [6.565656565656566, -0.25058797705105096, 0.4029192287907041, -0.020450485730962857, 0.22670639774385998, 0.050539903823178356], [6.666666666666667, -0.25486391628082494, 0.43306558869702094, 0.015077483903919948, 0.2258869071175529, 0.004062593670887578], [6.767676767676767, -0.2930379233387519, 0.3911617180119599, -0.01195935712820722, 0.2224442722994009, 0.04139790722266535], [6.8686868686868685, -0.30026896634793004, 0.4337653147082223, -0.058031687392565964, 0.25271024809300463, 0.025098566255803607], [6.96969696969697, -0.3268246712641839, 0.444073824923639, -0.08927732986144879, 0.2829798843698963, -0.017416317654055765], [7.070707070707071, -0.3213966289415018, 0.45594840006642523, -0.12242187882237496, 0.2673890787739098, -0.004358191734010071], [7.171717171717171, -0.2856546842119021, 0.5001832660851769, -0.10805259251869503, 0.30849789919827425, 0.026304151666580816], [7.2727272727272725, -0.23959625384410468, 0.49272188935531636, -0.08349725064920285, 0.276123574435044, -0.0130120677943526], [7.373737373737374, -0.23330414263335728, 0.5042353959287096, -0.10952342299355933, 0.2790668278530651, 0.025864122149079773], [7.474747474747475, -0.26851801598243236, 0.474566692838678, -0.09192783722726248, 0.24661054136426985, 0.027619210234838532], [7.575757575757575, -0.2866739836211356, 0.4247826770161146, -0.08525510755422179, 0.26482169039883613, 0.006652821494815695], [7.6767676767676765, -0.3058894987403621, 0.394522325102271, -0.0653009071883886, 0.2557916062580526, -0.019942074837217032], [7.777777777777778, -0.35478450141380635, 0.4236503162800086, -0.10808073740691262, 0.2593957796607198, -0.003161892216347967], [7.878787878787879, -0.3957211025248525, 0.40354862558524507, -0.06247879901344963, 0.27290242851028007, -0.017779927979317607], [7.979797979797979, -0.41897193026845225, 0.3688080348531277, -0.07674404019555499, 0.24924127727514853, 0.0020821462840483647], [8.080808080808081, -0.4470865744586888, 0.31940385702908985, -0.0634688994953401, 0.20647211800420542, 0.045457929313567166], [8.181818181818182, -0.4184848652940703, 0.3651817192130299, -0.042997482737341886, 0.20007753977872397, 0.07515328908276317], [8.282828282828282, -0.3871842256334122, 0.36455507641850365, 0.006285708418784376, 0.23488957251119183, 0.07295888503153508], [8.383838383838384, -0.40351984708130406, 0.3796581916219434, 0.02774993351595745, 0.25313709958080166, 0.07718761511313882], [8.484848484848484, -0.38992543422360537, 0.3363957044435797, 0.010867635750092135, 0.269684228685297, 0.10886563442651137], [8.585858585858587, -0.3810087225673874, 0.366342909574191, 0.01064502673943976, 0.25623621036051764, 0.15741370461931586], [8.686868686868687, -0.3816808002613219, 0.4046921947908251, 0.05131472006349774, 0.2555864458141802, 0.19151613164293338], [8.787878787878787, -0.4162782106346684, 0.4234644317483171, 0.029458561573737406, 0.2757931220488387, 0.19684603583016366], [8.88888888888889, -0.3844160758975552, 0.4687040018070048, -0.012964595352251591, 0.23291749286908942, 0.22981301171329255], [8.98989898989899, -0.43047960294472043, 0.5125794324656057, -0.015065226285663532, 0.19970236585250184, 0.22237470192946163], [9.09090909090909, -0.39209759102196057, 0.5575359513377446, 0.019797551780295058, 0.2072820630424157, 0.21297964982985373], [9.191919191919192, -0.36393939229345934, 0.5272501461342979, 0.011781788949287735, 0.19476511086386422, 0.25504838774346916], [9.292929292929292, -0.3143553522848566, 0.5652801661667287, 0.002403831933352245, 0.24389907266164743, 0.23195116683603723], [9.393939393939394, -0.3191788348474941, 0.5596305607340171, 0.04315598137348979, 0.25360405865974656, 0.18517783225767004], [9.494949494949495, -0.3342133536841771, 0.5506282743010305, 0.028379091378452077, 0.21765943891313386, 0.146973414929079], [9.595959595959595, -0.3704876006295444, 0.5118291521172519, 0.03998649686703437, 0.22193084882035816, 0.13122154411448944], [9.696969696969697, -0.39795071361354634, 0.4946221605606167, 0.05547872951981486, 0.225821129915831, 0.10450700701803473], [9.797979797979798, -0.44324965558681545, 0.5395322811438028, 0.08526245988695244, 0.1879775484767403, 0.10883352541771464], [9.8989898989899, -0.40736217306978967, 0.5075581126910804, 0.09495814961635472, 0.19504281744948984, 0.15266510005232603], [10.0, -0.3876983481692954, 0.5271233073683881, 0.08933288202219487, 0.19154457924228116, 0.14420081562002957]]}, "id": "el13858139826958652512", "plugins": [{"type": "reset"}, {"type": "zoom", "button": true, "enabled": false}, {"type": "boxzoom", "button": true, "enabled": false}, {"type": "interactive_legend", "element_ids": [["el13858139825295533200", "el13858139825295533200pts"], ["el13858139825295533536", "el13858139825295533536pts"], ["el13858139825295533824", "el13858139825295533824pts"], ["el13858139825295534112", "el13858139825295534112pts"], ["el13858139825295475952", "el13858139825295475952pts"]], "labels": ["a", "b", "c", "d", "e"], "ax": null, "alpha_unsel": 0.2, "alpha_over": 1.0, "start_visible": [true, true, true, true, true], "font_size": 10, "legend_offset": [0, 0]}]});
      });
    });
}else{
    // require.js not available: dynamically load d3 & mpld3
    mpld3_load_lib("https://d3js.org/d3.v5.js", function(){
         mpld3_load_lib("https://mpld3.github.io/js/mpld3.v0.5.7.js", function(){
                 
    mpld3.register_plugin("interactive_legend", InteractiveLegend);
    InteractiveLegend.prototype = Object.create(mpld3.Plugin.prototype);
    InteractiveLegend.prototype.constructor = InteractiveLegend;
    InteractiveLegend.prototype.requiredProps = ["element_ids", "labels"];
    InteractiveLegend.prototype.defaultProps = {"ax":null,
                                                "alpha_unsel":0.2,
                                                "alpha_over":1.0,
                                                "start_visible":true,
                                                "font_size": 10,
                                                "legend_offset": [0,0]}
    function InteractiveLegend(fig, props){
        mpld3.Plugin.call(this, fig, props);
    };

    InteractiveLegend.prototype.draw = function(){
        var alpha_unsel = this.props.alpha_unsel;
        var alpha_over = this.props.alpha_over;
        var font_size = this.props.font_size;
        var legend_offset = this.props.legend_offset;

        var legendItems = new Array();
        for(var i=0; i<this.props.labels.length; i++){
            var obj = {};
            obj.label = this.props.labels[i];

            var element_id = this.props.element_ids[i];
            mpld3_elements = [];
            for(var j=0; j<element_id.length; j++){
                var mpld3_element = mpld3.get_element(element_id[j], this.fig);

                // mpld3_element might be null in case of Line2D instances
                // for we pass the id for both the line and the markers. Either
                // one might not exist on the D3 side
                if(mpld3_element){
                    mpld3_elements.push(mpld3_element);
                }
            }

            obj.mpld3_elements = mpld3_elements;
            obj.visible = this.props.start_visible[i]; // should become be setable from python side
            legendItems.push(obj);
            set_alphas(obj, false);
        }

        // determine the axes with which this legend is associated
        var ax = this.props.ax
        if(!ax){
            ax = this.fig.axes[0];
        } else{
            ax = mpld3.get_element(ax, this.fig);
        }

        // add a legend group to the canvas of the figure
        var legend = this.fig.canvas.append("svg:g")
                               .attr("class", "legend");

        // add the rectangles
        legend.selectAll("rect")
                .data(legendItems)
                .enter().append("rect")
                .attr("height", 0.7*font_size)
                .attr("width", 1.6*font_size)
                .attr("x", ax.width + ax.position[0] + 15 + legend_offset[0])
                .attr("y",function(d,i) {
                           return ax.position[1] + i * (font_size+5) + 10 + legend_offset[1];})
                .attr("stroke", get_color)
                .attr("class", "legend-box")
                .style("fill", function(d, i) {
                           return d.visible ? get_color(d) : "white";})
                .on("click", click).on('mouseover', over).on('mouseout', out);

        // add the labels
        legend.selectAll("text")
              .data(legendItems)
              .enter().append("text")
              .attr("font-size", font_size)
              .attr("x", function (d) {
                           return ax.width + ax.position[0] + (1.9*font_size+15) + legend_offset[0];})
              .attr("y", function(d,i) {
                           return ax.position[1] + i * (font_size+5) + 10 + (0.72*font_size-1) + legend_offset[1];})
              .text(function(d) { return d.label })
              .on('mouseover', over).on('mouseout', out);


        // specify the action on click
        function click(d,i){
            d.visible = !d.visible;
            d3.select(this)
              .style("fill",function(d, i) {
                return d.visible ? get_color(d) : "white";
              })
            set_alphas(d, false);

        };

        // specify the action on legend overlay 
        function over(d,i){
             set_alphas(d, true);
        };

        // specify the action on legend overlay 
        function out(d,i){
             set_alphas(d, false);
        };

        // helper function for setting alphas
        function set_alphas(d, is_over){
            for(var i=0; i<d.mpld3_elements.length; i++){
                var type = d.mpld3_elements[i].constructor.name;

                if(type =="mpld3_Line"){
                    var current_alpha = d.mpld3_elements[i].props.alpha;
                    var current_alpha_unsel = current_alpha * alpha_unsel;
                    var current_alpha_over = current_alpha * alpha_over;
                    d3.select(d.mpld3_elements[i].path.nodes()[0])
                        .style("stroke-opacity", is_over ? current_alpha_over :
                                                (d.visible ? current_alpha : current_alpha_unsel))
                        .style("stroke-width", is_over ?
                                alpha_over * d.mpld3_elements[i].props.edgewidth : d.mpld3_elements[i].props.edgewidth);
                } else if((type=="mpld3_PathCollection")||
                         (type=="mpld3_Markers")){
                    var current_alpha = d.mpld3_elements[i].props.alphas[0];
                    var current_alpha_unsel = current_alpha * alpha_unsel;
                    var current_alpha_over = current_alpha * alpha_over;
                    d.mpld3_elements[i].pathsobj
                        .style("stroke-opacity", is_over ? current_alpha_over :
                                                (d.visible ? current_alpha : current_alpha_unsel))
                        .style("fill-opacity", is_over ? current_alpha_over :
                                                (d.visible ? current_alpha : current_alpha_unsel));
                } else{
                    console.log(type + " not yet supported");
                }
            }
        };


        // helper function for determining the color of the rectangles
        function get_color(d){
            var type = d.mpld3_elements[0].constructor.name;
            var color = "black";
            if(type =="mpld3_Line"){
                color = d.mpld3_elements[0].props.edgecolor;
            } else if((type=="mpld3_PathCollection")||
                      (type=="mpld3_Markers")){
                color = d.mpld3_elements[0].props.facecolors[0];
            } else{
                console.log(type + " not yet supported");
            }
            return color;
        };
    };
    
                 mpld3.draw_figure("fig_el138581398269586525123707440855", {"width": 640.0, "height": 480.0, "axes": [{"bbox": [0.125, 0.10999999999999999, 0.775, 0.77], "xlim": [-0.5, 10.5], "ylim": [-0.4977049114899597, 0.6158985031979995], "xdomain": [-0.5, 10.5], "ydomain": [-0.4977049114899597, 0.6158985031979995], "xscale": "linear", "yscale": "linear", "axes": [{"position": "bottom", "nticks": 8, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 10.0, "grid": {"gridOn": false}, "visible": true}, {"position": "left", "nticks": 8, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 10.0, "grid": {"gridOn": false}, "visible": true}], "axesbg": "#FFFFFF", "axesbgalpha": null, "zoomable": true, "id": "el13858139825295660272", "lines": [{"data": "data01", "xindex": 0, "yindex": 1, "coordinates": "data", "id": "el13858139825295533200", "color": "#1F77B4", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 2, "coordinates": "data", "id": "el13858139825295533536", "color": "#FF7F0E", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 3, "coordinates": "data", "id": "el13858139825295533824", "color": "#2CA02C", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 4, "coordinates": "data", "id": "el13858139825295534112", "color": "#D62728", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}, {"data": "data01", "xindex": 0, "yindex": 5, "coordinates": "data", "id": "el13858139825295475952", "color": "#9467BD", "linewidth": 4.0, "dasharray": "none", "alpha": 0.2, "zorder": 2, "drawstyle": "default"}], "paths": [], "markers": [], "texts": [], "collections": [], "images": [], "sharex": [], "sharey": []}], "data": {"data01": [[0.0, -0.019908499811116722, -0.021499947632910157, -0.01029166012225835, 0.03244228580069632, 0.01928262533515046], [0.10101010101010101, -0.016458898932398627, 0.02205039236866786, 0.03402373858153027, 0.07333221663757152, -0.02855961558564421], [0.20202020202020202, -0.055969046459446475, 0.03399647104925968, 0.026081379555132768, 0.11462529540157405, -0.025189945246136373], [0.30303030303030304, -0.051669641141327244, 0.06845735223046001, -0.009750522385667225, 0.141680565253481, -0.03227036387737939], [0.40404040404040403, -0.022603536242706227, 0.05378717664701743, -0.017936274661944418, 0.14622998364744555, -0.05066731034199261], [0.5050505050505051, -0.05638432527085166, 0.019946211645060094, 0.014302088331798857, 0.18596250944627085, -0.0690645604969633], [0.6060606060606061, -0.07422857205033108, 0.029590052080980565, -0.0052730528555332, 0.23220847580773785, -0.04052765389145295], [0.7070707070707071, -0.08381571607127886, 0.04973177482192606, -0.030746741410075717, 0.258890905291118, -0.037517304462227216], [0.8080808080808081, -0.10332951790430678, 0.05756457340441641, -0.02244190447688675, 0.26285968734798126, -0.04028112096067978], [0.9090909090909091, -0.09535216450429083, 0.09735911905058936, -0.01930066270326549, 0.2614993009035194, -0.034062880318745666], [1.0101010101010102, -0.1257576843554811, 0.11598056150467162, -0.02554549681466467, 0.2524035323399242, -0.034256284014175784], [1.1111111111111112, -0.1373580477684578, 0.1617519198852529, -0.04123238569114083, 0.21467608085461948, 0.011604716788099337], [1.2121212121212122, -0.15172962437464546, 0.13567879497228977, -0.05064703531478673, 0.24256284612437573, -0.028154510294944868], [1.3131313131313131, -0.1900718650657418, 0.15757333237603516, -0.007918756684345767, 0.20713464808265653, -0.010721858874179192], [1.4141414141414141, -0.1656716132573026, 0.19200596997961814, -0.024047536089262828, 0.1829725522982738, -0.04361806919016918], [1.5151515151515151, -0.137427692983859, 0.23239054521382324, -0.021916365658917875, 0.21998170231024006, 0.00555746506714417], [1.6161616161616161, -0.1818476945098042, 0.2726263836672627, -0.03290280192724673, 0.26346368209526466, 0.023807540665483514], [1.7171717171717171, -0.23002600006566246, 0.3027233615574207, -0.02084770649945568, 0.2191059916790467, 0.0007623299478043376], [1.8181818181818181, -0.27024694333880356, 0.32813518040409806, 0.00996031459932335, 0.2588656912514543, 0.003658255780781635], [1.9191919191919191, -0.2699947567594363, 0.3182957643528758, -0.022264681954284094, 0.23370298572502804, 0.023010254643693905], [2.0202020202020203, -0.22963231664163658, 0.3242948260839057, 0.020094451034570898, 0.2765807586901774, 0.05716465527898962], [2.121212121212121, -0.18850191626385734, 0.35311278444727745, 0.06630549445612367, 0.3142216035590631, 0.03269467760232164], [2.2222222222222223, -0.20819142622797537, 0.35250916119455394, 0.029422183974399795, 0.26950517718918016, 0.05148344230378013], [2.323232323232323, -0.19060212291285036, 0.3519005031926488, -0.01587407926435492, 0.2650964294275515, 0.08669092991773203], [2.4242424242424243, -0.23759785851499166, 0.4017905409705448, -0.0037438930132919056, 0.29552144037694567, 0.07571151808286698], [2.525252525252525, -0.1934201393235424, 0.45146622518376056, 0.01869138317250066, 0.27773000921664925, 0.11758273706691738], [2.6262626262626263, -0.22844720212468617, 0.49798958294841905, 0.032490602068444424, 0.2691424238432698, 0.1470676723612331], [2.727272727272727, -0.25698081068016515, 0.5333873973488403, 0.03509201516646551, 0.29434425643148, 0.18756207013721504], [2.8282828282828283, -0.21251522150091778, 0.5331973435175161, 0.041934442173791046, 0.3439408447483597, 0.18236123085841136], [2.929292929292929, -0.18217644279139586, 0.5009408872484383, 0.0873386076583322, 0.3528703927184868, 0.14234543048997095], [3.0303030303030303, -0.14533890845876546, 0.4971183614639475, 0.08142647036917754, 0.34683388539539406, 0.19089007938864577], [3.131313131313131, -0.18377919901586606, 0.46411519120949607, 0.07991154215434844, 0.3134043441423822, 0.23131227480613392], [3.2323232323232323, -0.16247358552001126, 0.4366648838321378, 0.06743126755061246, 0.3256032164505824, 0.2513420642925066], [3.3333333333333335, -0.19812491783329594, 0.44946710600058143, 0.05898265515444541, 0.3204617222208573, 0.21599402196180736], [3.4343434343434343, -0.18912500572522284, 0.40751173159412063, 0.054605643509281945, 0.35003797833834027, 0.2561198157525759], [3.5353535353535355, -0.218740892552648, 0.4486115969110386, 0.06572639397453511, 0.36837967688144646, 0.2725319846495674], [3.6363636363636362, -0.2679028612251969, 0.445203919378654, 0.06992701086462158, 0.3881251057724072, 0.22363983958591604], [3.7373737373737375, -0.3002811721199239, 0.4747175442192017, 0.09422401301715054, 0.4181787203026548, 0.19561009918026995], [3.8383838383838382, -0.27808124655662464, 0.4638420047144306, 0.12457833244737995, 0.41001079457415845, 0.22530132946827275], [3.9393939393939394, -0.2319833650384682, 0.4248567271991625, 0.12158149382192054, 0.36158176426737154, 0.2608563911863807], [4.040404040404041, -0.24559098890928985, 0.4350447985082474, 0.07292728699345588, 0.3217279242459198, 0.2737788535623165], [4.141414141414141, -0.2583394631723894, 0.4234984413852194, 0.10164455735682805, 0.3083234208411323, 0.22860669534350458], [4.242424242424242, -0.2730246176275948, 0.471741413862965, 0.06475323126785859, 0.2753266408452413, 0.20007078858210395], [4.343434343434343, -0.30847626826018687, 0.43139292655279815, 0.03890564552905476, 0.23727519665475946, 0.19821295669556807], [4.444444444444445, -0.29428459348234237, 0.4645475110948143, 0.07859941498548875, 0.21336430979936308, 0.15319436286702753], [4.545454545454545, -0.2641382187059986, 0.48444926668781235, 0.04970680991675576, 0.2056138153729696, 0.19748260995728228], [4.646464646464646, -0.22503755010265736, 0.5155991017685909, 0.004876339968888942, 0.22050071923864803, 0.16688095246999002], [4.747474747474747, -0.2515500460914453, 0.48630909065012556, -0.020556976523951158, 0.2564160628146859, 0.18471367777062675], [4.848484848484849, -0.271997297771161, 0.44460585488730814, -0.039552853631078584, 0.21612850874698677, 0.1447491489853907], [4.94949494949495, -0.2572299081240879, 0.4370618579544183, 0.002513338745705168, 0.18745258394625236, 0.09608595265082735], [5.05050505050505, -0.2899144372885114, 0.40059321911282, -0.0333877882697324, 0.20260561318897413, 0.1246728820279617], [5.151515151515151, -0.25675577247423953, 0.4492670012898023, 0.005474201225969748, 0.2108987393409497, 0.12347636478632013], [5.252525252525253, -0.22614890691666045, 0.47049720171462733, 0.014503645479369259, 0.16707092841006616, 0.1039916430839011], [5.353535353535354, -0.19057271165717884, 0.44040384206589644, 0.006003696736833524, 0.1816122706663303, 0.0845973470423371], [5.454545454545454, -0.22093951948962431, 0.48653893659719405, 0.051527741590611534, 0.14246917406306495, 0.10348378746991883], [5.555555555555555, -0.18901589932655866, 0.5243230558770984, 0.08152466898417546, 0.12273083221380032, 0.10023484110450719], [5.656565656565657, -0.2001599680065808, 0.4858171885038183, 0.07180018273796385, 0.16290743073338323, 0.1236827943042926], [5.757575757575758, -0.20208606995649953, 0.47395240606334227, 0.050086529753730485, 0.20522433293857983, 0.1091621477743567], [5.858585858585858, -0.21346896044601554, 0.4270281600215783, 0.07502694612389638, 0.21011121665910226, 0.10078946473150796], [5.959595959595959, -0.22152325241318288, 0.3823416098257894, 0.08107758781177085, 0.2522591159178727, 0.13472472761001783], [6.0606060606060606, -0.23916290692884626, 0.40544562427221914, 0.10933927117583524, 0.2488711783049129, 0.15874880064972063], [6.161616161616162, -0.2346498317915042, 0.4541463751192714, 0.062260665105304494, 0.2513882254763245, 0.15726618972343448], [6.262626262626262, -0.23422474702479532, 0.4150305729412272, 0.044455662155893874, 0.28215559926012584, 0.13145893663705593], [6.363636363636363, -0.22753415698747378, 0.4260382638495698, 0.0017282544467355984, 0.2633107074128448, 0.11323238767949159], [6.4646464646464645, -0.23676861865267299, 0.4495969844031823, -0.018071397177162767, 0.2696121027935201, 0.07528734795386241], [6.565656565656566, -0.25058797705105096, 0.4029192287907041, -0.020450485730962857, 0.22670639774385998, 0.050539903823178356], [6.666666666666667, -0.25486391628082494, 0.43306558869702094, 0.015077483903919948, 0.2258869071175529, 0.004062593670887578], [6.767676767676767, -0.2930379233387519, 0.3911617180119599, -0.01195935712820722, 0.2224442722994009, 0.04139790722266535], [6.8686868686868685, -0.30026896634793004, 0.4337653147082223, -0.058031687392565964, 0.25271024809300463, 0.025098566255803607], [6.96969696969697, -0.3268246712641839, 0.444073824923639, -0.08927732986144879, 0.2829798843698963, -0.017416317654055765], [7.070707070707071, -0.3213966289415018, 0.45594840006642523, -0.12242187882237496, 0.2673890787739098, -0.004358191734010071], [7.171717171717171, -0.2856546842119021, 0.5001832660851769, -0.10805259251869503, 0.30849789919827425, 0.026304151666580816], [7.2727272727272725, -0.23959625384410468, 0.49272188935531636, -0.08349725064920285, 0.276123574435044, -0.0130120677943526], [7.373737373737374, -0.23330414263335728, 0.5042353959287096, -0.10952342299355933, 0.2790668278530651, 0.025864122149079773], [7.474747474747475, -0.26851801598243236, 0.474566692838678, -0.09192783722726248, 0.24661054136426985, 0.027619210234838532], [7.575757575757575, -0.2866739836211356, 0.4247826770161146, -0.08525510755422179, 0.26482169039883613, 0.006652821494815695], [7.6767676767676765, -0.3058894987403621, 0.394522325102271, -0.0653009071883886, 0.2557916062580526, -0.019942074837217032], [7.777777777777778, -0.35478450141380635, 0.4236503162800086, -0.10808073740691262, 0.2593957796607198, -0.003161892216347967], [7.878787878787879, -0.3957211025248525, 0.40354862558524507, -0.06247879901344963, 0.27290242851028007, -0.017779927979317607], [7.979797979797979, -0.41897193026845225, 0.3688080348531277, -0.07674404019555499, 0.24924127727514853, 0.0020821462840483647], [8.080808080808081, -0.4470865744586888, 0.31940385702908985, -0.0634688994953401, 0.20647211800420542, 0.045457929313567166], [8.181818181818182, -0.4184848652940703, 0.3651817192130299, -0.042997482737341886, 0.20007753977872397, 0.07515328908276317], [8.282828282828282, -0.3871842256334122, 0.36455507641850365, 0.006285708418784376, 0.23488957251119183, 0.07295888503153508], [8.383838383838384, -0.40351984708130406, 0.3796581916219434, 0.02774993351595745, 0.25313709958080166, 0.07718761511313882], [8.484848484848484, -0.38992543422360537, 0.3363957044435797, 0.010867635750092135, 0.269684228685297, 0.10886563442651137], [8.585858585858587, -0.3810087225673874, 0.366342909574191, 0.01064502673943976, 0.25623621036051764, 0.15741370461931586], [8.686868686868687, -0.3816808002613219, 0.4046921947908251, 0.05131472006349774, 0.2555864458141802, 0.19151613164293338], [8.787878787878787, -0.4162782106346684, 0.4234644317483171, 0.029458561573737406, 0.2757931220488387, 0.19684603583016366], [8.88888888888889, -0.3844160758975552, 0.4687040018070048, -0.012964595352251591, 0.23291749286908942, 0.22981301171329255], [8.98989898989899, -0.43047960294472043, 0.5125794324656057, -0.015065226285663532, 0.19970236585250184, 0.22237470192946163], [9.09090909090909, -0.39209759102196057, 0.5575359513377446, 0.019797551780295058, 0.2072820630424157, 0.21297964982985373], [9.191919191919192, -0.36393939229345934, 0.5272501461342979, 0.011781788949287735, 0.19476511086386422, 0.25504838774346916], [9.292929292929292, -0.3143553522848566, 0.5652801661667287, 0.002403831933352245, 0.24389907266164743, 0.23195116683603723], [9.393939393939394, -0.3191788348474941, 0.5596305607340171, 0.04315598137348979, 0.25360405865974656, 0.18517783225767004], [9.494949494949495, -0.3342133536841771, 0.5506282743010305, 0.028379091378452077, 0.21765943891313386, 0.146973414929079], [9.595959595959595, -0.3704876006295444, 0.5118291521172519, 0.03998649686703437, 0.22193084882035816, 0.13122154411448944], [9.696969696969697, -0.39795071361354634, 0.4946221605606167, 0.05547872951981486, 0.225821129915831, 0.10450700701803473], [9.797979797979798, -0.44324965558681545, 0.5395322811438028, 0.08526245988695244, 0.1879775484767403, 0.10883352541771464], [9.8989898989899, -0.40736217306978967, 0.5075581126910804, 0.09495814961635472, 0.19504281744948984, 0.15266510005232603], [10.0, -0.3876983481692954, 0.5271233073683881, 0.08933288202219487, 0.19154457924228116, 0.14420081562002957]]}, "id": "el13858139826958652512", "plugins": [{"type": "reset"}, {"type": "zoom", "button": true, "enabled": false}, {"type": "boxzoom", "button": true, "enabled": false}, {"type": "interactive_legend", "element_ids": [["el13858139825295533200", "el13858139825295533200pts"], ["el13858139825295533536", "el13858139825295533536pts"], ["el13858139825295533824", "el13858139825295533824pts"], ["el13858139825295534112", "el13858139825295534112pts"], ["el13858139825295475952", "el13858139825295475952pts"]], "labels": ["a", "b", "c", "d", "e"], "ax": null, "alpha_unsel": 0.2, "alpha_over": 1.0, "start_visible": [true, true, true, true, true], "font_size": 10, "legend_offset": [0, 0]}]});
            })
         });
}
</script>
</body>

</html>